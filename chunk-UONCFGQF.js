import{c as E,d as F}from"./chunk-6WOHIUOL.js";import{a as P}from"./chunk-LA4QEO6T.js";import{A as N,B as T,C as _,s as m,u as y,v as C,x as D}from"./chunk-WIPSOZN2.js";import{Ca as e,Ob as S,Sa as o,Ya as a,Za as n,_ as d,_a as s,a as p,ab as c,b,ca as f,ib as g,kb as v,mb as h}from"./chunk-OGYDBGRP.js";var j=(()=>{class l{activeDialog=d(_);fb=d(N);productService=d(P);form;isSubmitting=!1;sub;data;constructor(){this.createForm()}ngOnInit(){this.data&&this.form.patchValue(this.data)}createForm(){this.form=this.fb.group({title:["",[m.required]],category:[""],description:[""],price:["",[m.required]]})}onFormSubmit(){this.isSubmitting=!0;let r=this.data?this.productService.updateProduct(this.data.id,b(p({},this.form.value),{image:this.data.image})):this.productService.addProduct(this.form.value),i=this.data?"UPDATE_CONNECTION_SUCCESS":"WANDB_INTEGRATION_SUCCESS";this.subscribeToService(r,i)}subscribeToService(r,i){let t=r.subscribe({next:u=>{this.isSubmitting=!1,this.activeDialog.close()},error:()=>{},complete:()=>{this.isSubmitting=!1,this.activeDialog.close()}});this.sub?.add(t)}ngOnDestroy(){this.sub?.unsubscribe()}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=f({type:l,selectors:[["app-product-dialog"]],inputs:{data:"data"},standalone:!0,features:[h],decls:12,vars:11,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["id","productForm",3,"submit","formGroup"],["controlName","title","label","Title","placeholder","Enter title",1,"d-block","mb-4",3,"control"],["controlName","category","label","Category","placeholder","Enter category",1,"d-block","mb-4",3,"control"],["controlName","description","label","Description","placeholder","Enter description",1,"d-block","mb-4",3,"control"],["controlName","price","label","Price","placeholder","Enter price",1,"d-block","mb-4",3,"control","type"],[1,"modal-footer"],["formName","productForm",3,"isSubmitting","isInvalid","submitText","submitingText"]],template:function(i,t){i&1&&(a(0,"div",0)(1,"h4",1),g(2),n(),a(3,"button",2),c("click",function(){return t.activeDialog.dismiss("Cross click")}),n()(),a(4,"div",3)(5,"form",4),c("submit",function(){return t.onFormSubmit()}),s(6,"lib-textfield",5)(7,"lib-textfield",6)(8,"lib-textfield",7)(9,"lib-textfield",8),n()(),a(10,"div",9),s(11,"lib-submit",10),n()),i&2&&(e(2),v(" ",t.data!=null&&t.data.id?"Update Product":"Add Product"," "),e(3),o("formGroup",t.form),e(),o("control",t.form.get("title")),e(),o("control",t.form.get("category")),e(),o("control",t.form.get("description")),e(),o("control",t.form.get("price"))("type","number"),e(2),o("isSubmitting",t.isSubmitting)("isInvalid",t.form.invalid)("submitText",t.data!=null&&t.data.id?"Update product":"Save product")("submitingText",t.data!=null&&t.data.id?"Updating product":"Saving product"))},dependencies:[S,T,C,y,D,E,F],changeDetection:0})}return l})();export{j as ProductDialogComponent};
