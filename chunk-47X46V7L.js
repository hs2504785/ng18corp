import{a as A}from"./chunk-ELMRUXJO.js";import{f as T,h as I,i as V,j as M}from"./chunk-33FNBRGN.js";import"./chunk-3SXWJEDT.js";import{m as L,n as D}from"./chunk-ACQHMWX4.js";import{o as U}from"./chunk-MXAHYXZS.js";import{$ as g,$a as y,Ea as l,Ra as f,X as d,Za as x,ab as E,bb as n,cb as i,db as h,eb as S,fb as _,gb as c,ia as p,ja as u,jb as k,pb as s,qb as C,tb as w}from"./chunk-EMGZUWUL.js";import{d as b}from"./chunk-ECBXVGWK.js";var R=(t,a)=>a.id;function F(t,a){if(t&1){let e=S();n(0,"div",0)(1,"h3"),s(2,"Users"),i(),n(3,"button",2),_("click",function(){p(e);let r=c();return u(r.openAddModal())}),s(4,"Add new user"),i()()}}function $(t,a){t&1&&h(0,"lib-grid-skelton")}function P(t,a){if(t&1){let e=S();n(0,"tr")(1,"th",5),s(2),i(),n(3,"td")(4,"a",6),s(5),i()(),n(6,"td"),s(7),i(),n(8,"td"),s(9),i(),n(10,"td",7)(11,"i",8),_("click",function(r){let m=p(e).$implicit,v=c(3);return u(v.openEditModal(r,m))}),i(),n(12,"i",9),_("click",function(r){let m=p(e).$implicit,v=c(3);return u(v.openConfirmDeleteModel(r,m.id))}),i()()()}if(t&2){let e=a.$implicit;l(2),C(e.id),l(2),k("routerLink","/users/",e.id,"/detail"),l(),C(e.username),l(2),C(e.email),l(2),C(e.phone)}}function j(t,a){if(t&1&&(n(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),s(4,"User ID"),i(),n(5,"th",4),s(6,"Username"),i(),n(7,"th",4),s(8,"Email"),i(),n(9,"th",4),s(10,"Phone"),i(),h(11,"th",4),i()(),n(12,"tbody"),y(13,P,13,6,"tr",null,R),i()()),t&2){let e=c(2);l(13),E(e.users())}}function O(t,a){if(t&1){let e=S();n(0,"lib-empty-screen")(1,"div",10)(2,"button",11),_("click",function(){p(e);let r=c(2);return u(r.openAddModal())}),s(3," Add new user "),i()()()}}function G(t,a){if(t&1&&(n(0,"div",1),f(1,j,15,0,"table",3)(2,O,4,0,"lib-empty-screen"),i()),t&2){let e=c();l(),x(e.users().length?1:2)}}var W=(()=>{class t{userService=d(A);toastService=d(T);confirmationDeleteService=d(I);router=d(L);isLoading=this.userService.isLoading;users=this.userService.users;sub;ngOnInit(){this.sub=this.userService.fetchAll().subscribe()}openAddModal(){return b(this,null,function*(){let o=(yield this.userService.openDialog()).closed.subscribe({next:r=>{},complete:()=>{}});this.sub?.add(o)})}openConfirmDeleteModel(e,o){return b(this,null,function*(){e.stopImmediatePropagation();let r=yield this.confirmationDeleteService.openConfirmDeleteDialog();r.componentInstance.title="Remove User",r.componentInstance.desc="Are you sure you want to delete this user?",r.closed.subscribe(m=>{m&&this.deleteUser(o)})})}deleteUser(e){let o=this.userService.delete(e).subscribe(()=>{this.toastService.success("User deleted successfully"),o.unsubscribe()})}openEditModal(e,o){return b(this,null,function*(){e.stopImmediatePropagation(),yield this.userService.openDialog(o)})}ngOnDestroy(){this.sub?.unsubscribe()}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=g({type:t,selectors:[["app-user-list"]],standalone:!0,features:[w],decls:4,vars:2,consts:[[1,"container","d-flex","justify-content-between","align-items-center","mb-4"],[1,"container"],[1,"btn","btn-primary",3,"click"],[1,"table","table-responsive"],["scope","col"],["scope","row"],[1,"btn","btn-link","btn-sm",3,"routerLink"],[1,"action-icons"],[1,"bi","bi-pencil","cursor-pointer","text-primary",3,"click"],[1,"bi","bi-trash3","ms-3","cursor-pointer","text-danger",3,"click"],[1,"action-buttons"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,r){o&1&&(f(0,F,5,0,"div",0),n(1,"div",1),f(2,$,1,0,"lib-grid-skelton")(3,G,3,1,"div",1),i()),o&2&&(x(r.users().length?0:-1),l(2),x(r.isLoading()?2:3))},dependencies:[U,V,D,M],changeDetection:0})}return t})();export{W as UserListComponent};
