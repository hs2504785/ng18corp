import{a as h,b as f}from"./chunk-6W2YLC2U.js";import{m}from"./chunk-JRYQZHQW.js";import{F as d,Kb as u,La as o,N as s,R as p,X as n,j as a,ka as l}from"./chunk-FMHGYVMK.js";import{c}from"./chunk-2VMXMS7J.js";var y=(()=>{class r extends f{ngbModal=n(m);apiService=n(h);apiUrl="users";isLoaded=o(!1);isLoading=o(!1);selectedUserId=o(null);users=this.resources;selectedUser=u(()=>{let e=this.selectedUserId();return e?this.users().find(t=>t.id===+e):null});fetchUsers(){return this.isLoaded()?a(this.users()):(this.isLoading.set(!0),this.apiService.getAll(this.apiUrl).pipe(s(this.setResources),d(()=>{this.isLoaded.set(!0),this.isLoading.set(!1)})))}getUser(e){if(this.users().length){let t=this.users().find(i=>i.id===+e);return a(t)}return this.apiService.getById(this.apiUrl,e)}addUser(e){return this.apiService.create(this.apiUrl,e).pipe(s(t=>{this.upsertResource(t)}))}updateUser(e,t){return this.apiService.update(this.apiUrl,e,t).pipe(s(i=>{this.upsertResource(i)}))}deleteProduct(e){return this.apiService.delete(this.apiUrl,e).pipe(s(()=>this.removeResource(e)))}openDialog(e){return c(this,null,function*(){let{UserDialogComponent:t}=yield import("./chunk-6XQ27UV4.js"),i=this.ngbModal.open(t,{centered:!0,scrollable:!0,size:"md",windowClass:"user-dialog"});return e&&(i.componentInstance.data=e),i})}static \u0275fac=(()=>{let e;return function(i){return(e||(e=l(r)))(i||r)}})();static \u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();export{y as a};
