import{a as m,b as g}from"./chunk-RH62NQLJ.js";import{n as U}from"./chunk-NGIY3FYG.js";import{F as l,Kb as f,La as a,N as s,R as u,X as c,j as n,ka as h}from"./chunk-FMHGYVMK.js";import{a as o,b as p,c as d}from"./chunk-2VMXMS7J.js";var R=(()=>{class r extends g{ngbModal=c(U);apiService=c(m);apiUrl="users";isLoaded=a(!1);isLoading=a(!1);selectedUserId=a(null);users=this.resources;selectedUser=f(()=>{let e=this.selectedUserId();return e?this.users().find(t=>t.id===+e):null});fetchUsers(){return this.isLoaded()?n(this.users()):(this.isLoading.set(!0),this.apiService.getAll(this.apiUrl).pipe(s(this.setResources),l(()=>{this.isLoaded.set(!0),this.isLoading.set(!1)})))}getUser(e){if(this.users().length){let t=this.users().find(i=>i.id===+e);return n(t)}return this.apiService.getById(this.apiUrl,e)}addUser(e){return this.apiService.create(this.apiUrl,e).pipe(s(t=>{this.upsertResource(o(o({},t),e))}))}updateUser(e,t){return this.apiService.update(this.apiUrl,e,t).pipe(s(i=>{this.upsertResource(p(o({},i),{id:+e}))}))}deleteUser(e){return this.apiService.delete(this.apiUrl,e).pipe(s(()=>this.removeResource(e)))}openDialog(e){return d(this,null,function*(){let{UserDialogComponent:t}=yield import("./chunk-YMPHCYE7.js"),i=this.ngbModal.open(t,{centered:!0,scrollable:!0,size:"md",windowClass:"user-dialog"});return e&&(i.componentInstance.data=e),i})}static \u0275fac=(()=>{let e;return function(i){return(e||(e=h(r)))(i||r)}})();static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();export{R as a};
