import{a as _}from"./chunk-DRSFDPV7.js";import{c as D,d as U,e as F}from"./chunk-46JFDYUD.js";import"./chunk-PIOIWGAG.js";import"./chunk-6CGUH72P.js";import{b as u,d as v,e as S,g as y,h as N,k as E,l as k,m as C}from"./chunk-JU4GLKUB.js";import"./chunk-QXXFWN3T.js";import{$ as b,Aa as t,Qa as o,Wb as h,X as s,Ya as l,Za as i,_a as n,ab as c,kb as m,mb as f,ob as g}from"./chunk-VMMD3CQM.js";import"./chunk-2VMXMS7J.js";var V=(()=>{class d{activeDialog=s(C);toastService=s(F);fb=s(E);userService=s(_);form;isSubmitting=!1;sub;data;constructor(){this.createForm()}ngOnInit(){this.data&&this.form.patchValue(this.data)}createForm(){this.form=this.fb.group({email:["",[u.required,u.email]],username:[""],name:this.fb.group({firstname:[""],lastname:[""]}),phone:[""],address:this.fb.group({street:[""],number:[],city:[""],zipcode:[""],geolocation:this.fb.group({lat:[""],long:[""]})})})}onFormSubmit(){this.isSubmitting=!0;let a=this.data?this.userService.updateUser(this.data.id,this.form.value):this.userService.addUser(this.form.value),r=this.data?"User updated successfully":"User added successfully";this.subscribeToService(a,r)}subscribeToService(a,r){let e=a.subscribe({next:p=>{this.isSubmitting=!1,this.toastService.success(r),this.activeDialog.close()},complete:()=>{this.isSubmitting=!1,this.activeDialog.close()}});this.sub?.add(e)}ngOnDestroy(){this.sub?.unsubscribe()}static \u0275fac=function(r){return new(r||d)};static \u0275cmp=b({type:d,selectors:[["app-user-dialog"]],inputs:{data:"data"},standalone:!0,features:[g],decls:28,vars:17,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["id","userForm",3,"submit","formGroup"],["controlName","email","label","Email","placeholder","Enter email","ngbAutoFocus","",1,"d-block","mb-4",3,"control"],["controlName","username","label","Username","placeholder","Enter username",1,"d-block","mb-4",3,"control"],["controlName","phone","label","Phone number","placeholder","Enter phone",1,"d-block","mb-4",3,"control"],["formGroupName","name",1,"mb-4"],["controlName","firstname","label","First name","placeholder","Enter firstname",1,"d-block","mb-4",3,"control"],["controlName","lastname","label","Last name","placeholder","Enter lastname",1,"d-block","mb-4",3,"control"],["formGroupName","address",1,"mb-3"],["controlName","street","label","Street","placeholder","Enter street",1,"d-block","mb-4",3,"control"],["controlName","number","label","Door number","placeholder","Enter door number",1,"d-block","mb-4",3,"control"],["controlName","city","label","City","placeholder","Enter city",1,"d-block","mb-4",3,"control"],["controlName","zipcode","label","Zip","placeholder","Enter zipcode",1,"d-block","mb-4",3,"control"],["formGroupName","geolocation"],["controlName","lat","label","Latitude","placeholder","Enter latitude",1,"d-block","mb-4",3,"control"],["controlName","long","label","Longitude","placeholder","Enter longitude",1,"d-block","mb-4",3,"control"],[1,"modal-footer"],["formName","userForm",3,"isSubmitting","isInvalid","submitText","submitingText"]],template:function(r,e){r&1&&(l(0,"div",0)(1,"h4",1),m(2),i(),l(3,"button",2),c("click",function(){return e.activeDialog.dismiss("Cross click")}),i()(),l(4,"div",3)(5,"form",4),c("submit",function(){return e.onFormSubmit()}),n(6,"lib-textfield",5)(7,"lib-textfield",6)(8,"lib-textfield",7),l(9,"fieldset",8)(10,"legend"),m(11,"Name"),i(),n(12,"lib-textfield",9)(13,"lib-textfield",10),i(),l(14,"fieldset",11)(15,"legend"),m(16,"Address"),i(),n(17,"lib-textfield",12)(18,"lib-textfield",13)(19,"lib-textfield",14)(20,"lib-textfield",15),l(21,"fieldset",16)(22,"legend"),m(23,"Geo location"),i(),n(24,"lib-textfield",17)(25,"lib-textfield",18),i()()()(),l(26,"div",19),n(27,"lib-submit",20),i()),r&2&&(t(2),f(" ",e.data!=null&&e.data.id?"Update User":"Add User"," "),t(3),o("formGroup",e.form),t(),o("control",e.form.get("email")),t(),o("control",e.form.get("username")),t(),o("control",e.form.get("phone")),t(4),o("control",e.form.get("name.firstname")),t(),o("control",e.form.get("name.lastname")),t(4),o("control",e.form.get("address.street")),t(),o("control",e.form.get("address.number")),t(),o("control",e.form.get("address.city")),t(),o("control",e.form.get("address.zipcode")),t(4),o("control",e.form.get("address.geolocation.lat")),t(),o("control",e.form.get("address.geolocation.long")),t(2),o("isSubmitting",e.isSubmitting)("isInvalid",e.form.invalid)("submitText",e.data!=null&&e.data.id?"Update user":"Save user")("submitingText",e.data!=null&&e.data.id?"Updating user":"Saving user"))},dependencies:[h,k,S,v,y,N,D,U],styles:["legend[_ngcontent-%COMP%]{border-style:none;border-width:0;font-size:1rem;line-height:20px;margin-bottom:0;width:auto;padding:0 10px;position:relative;background-color:#fff;top:-22px;color:#ced4da;font-weight:800}fieldset[_ngcontent-%COMP%]{border:1px solid #f1f2f2;padding:10px}"],changeDetection:0})}return d})();export{V as UserDialogComponent};
