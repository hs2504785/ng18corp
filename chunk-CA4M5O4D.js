import{a as h,b as f}from"./chunk-6W2YLC2U.js";import{m}from"./chunk-JRYQZHQW.js";import{F as n,Kb as l,La as o,N as s,R as u,X as c,j as a,ka as p}from"./chunk-FMHGYVMK.js";import{c as d}from"./chunk-2VMXMS7J.js";var L=(()=>{class r extends f{ngbModal=c(m);apiService=c(h);apiUrl="products";isLoaded=o(!1);products=this.resources;isLoading=o(!1);selectedProductId=o(null);selectedProduct=l(()=>{let e=this.selectedProductId();return e?this.products().find(t=>t.id===+e):null});fetchProducts(){return this.isLoaded()?a(this.products()):(this.isLoading.set(!0),this.apiService.getAll(this.apiUrl).pipe(s(this.setResources),n(()=>{this.isLoaded.set(!0),this.isLoading.set(!1)})))}addProduct(e){return e.image="https://picsum.photos/150/150",this.apiService.create(this.apiUrl,e).pipe(s(t=>{this.upsertResource(t)}))}updateProduct(e,t){return this.apiService.update(this.apiUrl,e,t).pipe(s(i=>{this.upsertResource(i)}))}deleteProduct(e){return this.apiService.delete(this.apiUrl,e).pipe(s(()=>this.removeResource(e)))}selectProduct(e){this.selectedProductId.set(e)}clearSelection(){this.selectedProductId.set(null)}openDialog(e){return d(this,null,function*(){let{ProductDialogComponent:t}=yield import("./chunk-PJYR6F4Y.js"),i=this.ngbModal.open(t,{centered:!0,scrollable:!0,size:"md",windowClass:"product-dialog"});return e&&(i.componentInstance.data=e),i})}static \u0275fac=(()=>{let e;return function(i){return(e||(e=p(r)))(i||r)}})();static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();export{L as a};
