import{a as j}from"./chunk-3GAL2WWF.js";import{a as $}from"./chunk-7HOUL5AY.js";import{f as D,h as F,i as Q,j as A}from"./chunk-33FNBRGN.js";import"./chunk-3SXWJEDT.js";import{m as I}from"./chunk-ACQHMWX4.js";import{o as V,t as L}from"./chunk-MXAHYXZS.js";import{$ as v,$a as S,Ea as l,Ra as f,Va as y,X as g,Za as P,ab as w,bb as o,ca as h,cb as r,db as M,eb as C,fb as _,gb as c,ia as m,ja as u,pb as d,qb as b,rb as O,tb as k,wb as T,xb as E}from"./chunk-EMGZUWUL.js";import{d as x}from"./chunk-ECBXVGWK.js";var R=(()=>{class i{transform(t,e=250,n="..."){return t.length>e?t.substring(0,e)+n:t}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=h({name:"seeAll",type:i,pure:!0,standalone:!0})}return i})();var B=(i,p)=>p.id;function G(i,p){if(i&1){let t=C();o(0,"div",0)(1,"h3"),d(2,"Products"),r(),o(3,"button",3),_("click",function(){m(t);let n=c();return u(n.openAddModal())}),d(4," Add new product "),r()()}}function N(i,p){i&1&&M(0,"lib-grid-skelton")}function Y(i,p){if(i&1){let t=C();o(0,"button",19),_("click",function(n){m(t);let a=c().$implicit,s=c(2);return u(s.addToCart(n,a))}),d(1," Add to Cart "),r()}}function q(i,p){if(i&1){let t=C();o(0,"div",16)(1,"button",20),_("click",function(n){m(t);let a=c().$implicit,s=c(2);return u(s.decreaseQuantity(n,a.id))}),d(2," - "),r(),o(3,"button",21),d(4),r(),o(5,"button",20),_("click",function(n){m(t);let a=c().$implicit,s=c(2);return u(s.increaseQuantity(n,a.id))}),d(6," + "),r()()}if(i&2){let t=c().$implicit,e=c(2);l(4),O(" ",e.getItemQuantity(t.id)()," ")}}function H(i,p){if(i&1){let t=C();o(0,"div",6),_("click",function(){let n=m(t).$implicit,a=c(2);return u(a.goToDetails(n))}),o(1,"div",7)(2,"div",8),M(3,"img",9),r(),o(4,"div",10)(5,"h4"),d(6),r(),o(7,"span"),d(8),r(),o(9,"p"),d(10),T(11,"seeAll"),r(),o(12,"div",11)(13,"div",12)(14,"div",13),d(15),r(),o(16,"div",14),f(17,Y,2,0,"button",15)(18,q,7,1,"div",16),r()(),o(19,"i",17),_("click",function(n){let a=m(t).$implicit,s=c(2);return u(s.openEditModal(n,a))}),r(),o(20,"i",18),_("click",function(n){let a=m(t).$implicit,s=c(2);return u(s.openConfirmDeleteModel(n,a.id))}),r()()()()()}if(i&2){let t=p.$implicit,e=c(2);l(3),y("ngSrc",t.image),l(3),b(t.title),l(2),b(t.category),l(2),b(E(11,6,t.description)),l(5),O("",t.price,"$"),l(2),P(e.getItemQuantity(t.id)()===0?17:18)}}function J(i,p){if(i&1){let t=C();o(0,"lib-empty-screen")(1,"div",22)(2,"button",23),_("click",function(){m(t);let n=c(2);return u(n.openAddModal())}),d(3," Add new product "),r()()()}}function K(i,p){if(i&1&&(o(0,"div",2)(1,"div",4),S(2,H,21,8,"div",5,B,!1,J,4,0,"lib-empty-screen"),r()()),i&2){let t=c();l(2),w(t.products())}}var dt=(()=>{class i{productService=g($);toastService=g(D);confirmationDeleteService=g(F);router=g(I);cartStore=g(j);isLoading=this.productService.isLoading;products=this.productService.products;sub;ngOnInit(){this.sub=this.productService.fetchAll().subscribe()}openAddModal(){return x(this,null,function*(){let e=(yield this.productService.openDialog()).closed.subscribe({next:n=>{},complete:()=>{}});this.sub?.add(e)})}goToDetails(t){this.productService.selectedId.set(t.id),this.router.navigate(["products",t.id,"detail"])}openConfirmDeleteModel(t,e){return x(this,null,function*(){t.stopImmediatePropagation();let n=yield this.confirmationDeleteService.openConfirmDeleteDialog();n.componentInstance.title="Delete Product",n.componentInstance.desc="Are you sure you want to delete this product?",n.closed.subscribe(a=>{a&&this.deleteProduct(e)})})}deleteProduct(t){let e=this.productService.delete(t).subscribe(()=>{this.toastService.success("Product deleted successfully"),e.unsubscribe()})}openEditModal(t,e){return x(this,null,function*(){t.stopImmediatePropagation();let a=(yield this.productService.openDialog(e)).closed.subscribe({next:s=>{},complete:()=>{}})})}getItemQuantity=t=>this.cartStore.getItemQuantity(t);addToCart(t,e){t.stopImmediatePropagation(),this.cartStore.addToCart(e)}increaseQuantity(t,e){t.stopImmediatePropagation();let n=this.getItemQuantity(e)();this.cartStore.updateQuantity(e,n+1)}decreaseQuantity(t,e){t.stopImmediatePropagation();let n=this.getItemQuantity(e)();n===1?this.cartStore.removeFromCart(e):this.cartStore.updateQuantity(e,n-1)}ngOnDestroy(){this.sub?.unsubscribe()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-product-list"]],standalone:!0,features:[k],decls:4,vars:2,consts:[[1,"container","d-flex","justify-content-between","align-items-center","mb-4"],[1,"container"],[1,"container","products"],[1,"btn","btn-primary",3,"click"],[1,"row","gy-4"],[1,"col-lg-6","product-item"],[1,"col-lg-6","product-item",3,"click"],[1,"product","d-flex","align-items-start"],[1,"pic"],["width","150","height","150","alt","product image",1,"img-fluid",3,"ngSrc"],[1,"product-info"],[1,"product-footer","mt-auto","align-self-start","d-flex","w-100"],[1,"action","d-flex","align-items-center"],[1,"badge","bg-secondary","me-2"],[1,"d-flex","align-items-center"],[1,"btn","btn-primary","btn-sm"],[1,"btn-group","btn-group-sm"],[1,"bi","bi-pencil","cursor-pointer","text-primary","ms-auto","icon",3,"click"],[1,"bi","bi-trash3","ms-3","cursor-pointer","text-danger","icon",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-outline-primary",3,"click"],["disabled","",1,"btn","btn-outline-primary"],[1,"action-buttons"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,n){e&1&&(f(0,G,5,0,"div",0),o(1,"div",1),f(2,N,1,0,"lib-grid-skelton")(3,K,5,1,"div",2),r()),e&2&&(P(n.products().length?0:-1),l(2),P(n.isLoading()?2:3))},dependencies:[V,L,R,Q,A],styles:['.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{background-color:var(--surface-color);box-shadow:0 2px 15px #0000001a;position:relative;border-radius:5px;transition:.5s;padding:30px;height:100%}.product-item[_ngcontent-%COMP%]{cursor:pointer}.product-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:none}.product-item[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{display:inline}@media (max-width: 468px){.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{flex-direction:column;justify-content:center!important;align-items:center!important}}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{overflow:hidden;flex-shrink:0}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:ease-in-out .3s}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:30px;height:100%;gap:6px;width:100%}@media (max-width: 468px){.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{padding:30px 0 0;text-align:center}}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;font-size:20px}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:15px;padding-bottom:10px;position:relative;font-weight:500}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"";position:absolute;display:block;width:50px;height:1px;background:color-mix(in srgb,var(--default-color),transparent 85%);bottom:0;left:0}@media (max-width: 468px){.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{left:calc(50% - 25px)}}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 0;font-size:14px}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]{margin-top:12px;display:flex;align-items:center;justify-content:start;width:100%}@media (max-width: 468px){.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]{justify-content:center}}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--default-color),transparent 94%);transition:ease-in-out .3s;display:flex;align-items:center;justify-content:center;border-radius:50px;width:36px;height:36px}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:color-mix(in srgb,var(--default-color),transparent 20%);font-size:16px;margin:0 2px}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:var(--accent-color)}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:var(--contrast-color)}.products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{margin-left:8px}'],changeDetection:0})}return i})();export{dt as ProductListComponent};
